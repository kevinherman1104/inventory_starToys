<!DOCTYPE html>
<html>
<head>
    <title>Add New Product</title>
    <style>
        img.preview {
            max-width: 200px;
            max-height: 200px;
            margin-top: 10px;
            display: none; /* hidden by default */
            border: 1px solid #ccc;
            padding: 5px;
        }
    </style>
</head>
<body>
    {% extends "base.html" %}
    {% block content %}
    <h2>Add New Product</h2>
    <form action="{{ url_for('add') }}" method="POST" enctype="multipart/form-data">
        Product ID: <input type="text" name="product_id" required><br>
        Name: <input type="text" name="name" required><br>
        Stock: <input type="number" name="stock" value="0"><br>

        Image: 
        <input type="file" name="image_file" id="image_file"><br>
        <img id="preview" class="preview" alt="Image Preview"><br>

        Category: <input type="text" name="category"><br>
        Supplier: <input type="text" name="supplier"><br>
        Cost Price: <input type="number" step="0.01" name="cost_price"><br>
        Selling Price: <input type="number" step="0.01" name="selling_price"><br>

        <button type="submit">Save</button>
    </form>
    <a href="{{ url_for('home') }}">Back</a>

    <script>
        document.getElementById("image_file").addEventListener("change", function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById("preview");
                    preview.src = e.target.result;
                    preview.style.display = "block"; // show preview
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
    {% endblock %}
</body>
</html>
